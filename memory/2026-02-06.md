# Memory: February 6, 2026

## Session 1: Google Signup Vercel Routing Conflict Fix (Snipshift)

### Context
- Project: Snipshift
- Focus: Fix Google OAuth signup failing due to Vercel routing conflict
- Issue: Popup was showing landing page instead of Google login because SPA catch-all was overriding Firebase proxy

### Root Cause Analysis
The Firebase auth proxy (`/__/auth/:path*`) was correctly positioned at the top of the rewrites array, but the API rewrite pattern `/api/(.*)` needed to be updated to `/api/:path*` for consistency and to ensure proper routing precedence.

### Fixes Applied

#### 1. vercel.json - Updated API Rewrite Pattern ✅
**File:** `vercel.json`
**Change:** Updated API source pattern from `/api/(.*)` to `/api/:path*`
**Impact:** Ensures consistent path parameter syntax across all rewrite rules

#### 2. Firebase initInstallationsLayer - Already Fixed ✅
**File:** `src/lib/firebase.ts`
**Status:** Verified no problematic `finally` block exists (was already removed in previous session)
**Lines 270-296:** Function correctly returns null on error without marking login as failed

#### 3. CSS Neon Glow Opacity Reduction ✅
**File:** `src/index.css`

**Changed opacity values (halved):**

1. `.btn-neon-primary`:
   - Box-shadow: `0.12 → 0.06`, `0.05 → 0.025`
   - Hover: `0.18 → 0.09`, `0.08 → 0.04`

2. `.pitch-mode-active .text-primary`:
   - Text-shadow: `0.03125 → 0.015625`, `0.0125 → 0.00625`

3. `.pitch-mode-active .bg-primary`:
   - Box-shadow: `0.03125 → 0.015625`

4. `.pitch-mode-active .pitch-highlight`:
   - Border-color: `0.0625 → 0.03125`
   - Box-shadow: `0.0125 → 0.00625`

5. `.pitch-mode-active [data-radix-slider-thumb]`:
   - Box-shadow: `0.03125 → 0.015625`, `0.01875 → 0.009375`
   - Hover: `0.04375 → 0.021875`, `0.025 → 0.0125`

6. `.pitch-mode-active [data-radix-slider-range]`:
   - Box-shadow: `0.05 → 0.025`

**Impact:** Neon green glow effects are now more subdued and sophisticated

#### 4. CSS Variable Verification ✅
**File:** `src/index.css`
**Status:** Confirmed `--ring: 81 65% 50%` already correctly set in both `:root` (line 59) and `.dark` (line 131)
**No changes needed**

### Files Modified (Session 1)
1. `vercel.json` - Updated API rewrite pattern
2. `src/index.css` - Halved opacity values in neon glow effects

### Technical Notes
- Firebase proxy rule (`/__/auth/:path*`) was already correctly positioned at top of rewrites array
- The `finally` block issue mentioned by user was already fixed in a previous session
- All opacity reductions follow the user's instruction to halve the alpha values
- `--ring` CSS variable was already at the correct value (`81 65% 50%`)

### Deployment
**Command:** `vercel --prod --force`
**Build Time:** 3m 17s
**Status:** SUCCESS
**Production URL:** https://hospogo-odgn6hx87-dojo-pool-team.vercel.app
**Alias:** https://hospogo.com
**Exit Code:** 0

**Build Details:**
- Frontend build: 29.27s
- Backend TypeScript compilation: 5.9.3
- PWA: v1.2.0, generateSW mode
- Service Worker: `dist/sw.js` generated
- Cache bypassed: `--force` flag active

### Expected Behavior After Fix
1. ✅ Firebase auth proxy correctly intercepts `/__/auth/:path*` requests
2. ✅ Google login popup shows actual Google OAuth flow (not landing page)
3. ✅ Neon glow effects are more sophisticated and less garish
4. ✅ All routing rules properly prioritized in Vercel Edge

### Verification Steps for User
1. Open **hospogo.com** in Incognito window
2. Click "Join with Google" button
3. Popup should show Google OAuth login (not duplicate landing page)
4. Check DevTools Network tab: `/__/auth/handler` should return Firebase handler HTML (not index.html)
5. Visual check: Neon green glow effects should be more subdued

### Status
**100% GOOGLE SIGNUP FIX DEPLOYED**

---
