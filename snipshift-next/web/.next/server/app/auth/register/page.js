(()=>{var e={};e.id=454,e.ids=[454],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},42415:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>c});var t=r(66965),a=r(74902),n=r(36408),o=r.n(n),i=r(14346),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(s,l);let c=["",{children:["auth",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,17708)),"/home/runner/workspace/snipshift-next/web/app/auth/register/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,55722)),"/home/runner/workspace/snipshift-next/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35438,23)),"next/dist/client/components/not-found-error"]}],u=["/home/runner/workspace/snipshift-next/web/app/auth/register/page.tsx"],d="/auth/register/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/register/page",pathname:"/auth/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},26376:(e,s,r)=>{Promise.resolve().then(r.bind(r,54103))},54103:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>RegisterPage});var t=r(84196),a=r(78726),n=r(71808),o=r(74555),i=r(70560),l=r.n(i),c=r(10459),u=r.n(c),d=r(58665),m=r.n(d),p=r(86806),h=r.n(p),g=r(34225),x=r.n(g),f=r(54965),v=r.n(f),w=r(13317),b=r.n(w),P=r(26225),y=r.n(P),j=r(64244),C=r.n(j),D=r(93809),_=r.n(D),S=r(41775),A=r.n(S),I=r(46873),N=r.n(I),R=r(54077),q=r.n(R),E=r(69106),k=r(35118),T=r(67810),F=r(43178);function RegisterPage(){let e=(0,o.useSearchParams)(),s=(0,o.useRouter)(),{showNotification:r}=(0,k.l)(),{dispatch:i}=(0,T.a)(),[c,d]=(0,a.useState)({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",role:e.get("role")?.toUpperCase()||"PROFESSIONAL"}),[p,g]=(0,a.useState)({}),[f,w]=(0,a.useState)({status:"testing",message:"Testing API connectivity..."});(0,a.useEffect)(()=>{let testConnection=async()=>{console.log("\uD83D\uDE80 Starting API connectivity test...");try{let e=await (0,F.M)();e.success?(w({status:"success",message:"API connection successful! Ready for registration."}),console.log("✅ API connectivity test completed successfully")):(w({status:"failed",message:`API connection failed: ${e.error?.message||"Unknown error"}`}),console.error("❌ API connectivity test failed:",e.error))}catch(e){w({status:"failed",message:`API connection error: ${e instanceof Error?e.message:"Unknown error"}`}),console.error("\uD83D\uDCA5 API connectivity test crashed:",e)}};testConnection()},[]);let{data:P,loading:j,error:D}=(0,n.useQuery)(E.GET_USER_ROLES,{onCompleted:e=>{console.log("\uD83D\uDCCB User roles fetched successfully:",e)},onError:e=>{console.error("❌ Failed to fetch user roles:",e)}}),[S,{loading:I}]=(0,n.useMutation)(E.c7,{onCompleted:e=>{if(console.log("\uD83C\uDF89 Registration mutation completed:",e),e.register.success){let{user:t,token:a}=e.register;localStorage.setItem("authToken",a),localStorage.setItem("userData",JSON.stringify(t)),i({type:"SET_AUTH",payload:{user:t,token:a}}),console.log("✅ Registration successful! User data:",t),console.log("\uD83D\uDD11 JWT Token received:",a.substring(0,20)+"..."),r("Registration successful! Welcome to SnipShift!","success"),s.push("/dashboard")}else console.error("❌ Registration failed:",e.register.message),r(e.register.message||"Registration failed","error")},onError:e=>{console.error("\uD83D\uDCA5 Registration mutation error:",e),r(`Registration error: ${e.message}`,"error")}}),validateForm=()=>{let e={};return c.email&&/\S+@\S+\.\S+/.test(c.email)||(e.email="Valid email is required"),(!c.password||c.password.length<6)&&(e.password="Password must be at least 6 characters"),c.password!==c.confirmPassword&&(e.confirmPassword="Passwords do not match"),c.firstName.trim()||(e.firstName="First name is required"),c.lastName.trim()||(e.lastName="Last name is required"),g(e),0===Object.keys(e).length},handleSubmit=async e=>{if(e.preventDefault(),console.log("\uD83D\uDCDD Form submitted with data:",{...c,password:"***",confirmPassword:"***"}),!validateForm()){console.warn("⚠️ Form validation failed");return}if("success"!==f.status){r("API connection not available. Please try again.","error");return}console.log("\uD83D\uDE80 Sending registration mutation to API...");try{await S({variables:{input:{email:c.email,password:c.password,displayName:`${c.firstName} ${c.lastName}`,roles:[c.role],currentRole:c.role}}})}catch(e){console.error("\uD83D\uDCA5 Registration submission failed:",e)}},handleInputChange=e=>s=>{let r=s.target.value;d(s=>({...s,[e]:r})),p[e]&&g(s=>({...s,[e]:void 0}))};return t.jsx(l(),{maxWidth:"sm",sx:{py:8},children:(0,t.jsxs)(u(),{elevation:3,sx:{p:4},children:[t.jsx(m(),{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"Join SnipShift 2.0"}),t.jsx(m(),{variant:"body1",color:"text.secondary",align:"center",sx:{mb:3},children:"Create your account and connect with the creative industry"}),t.jsx(h(),{sx:{mb:3},children:t.jsx(x(),{severity:"success"===f.status?"success":"failed"===f.status?"error":"info",icon:"testing"===f.status?t.jsx(v(),{size:20}):void 0,children:f.message})}),j&&t.jsx(x(),{severity:"info",sx:{mb:2},children:"Loading user roles from API..."}),D&&(0,t.jsxs)(x(),{severity:"warning",sx:{mb:2},children:["Failed to load roles: ",D.message]}),P&&t.jsx(x(),{severity:"success",sx:{mb:2},children:"✅ Roles loaded successfully from API!"}),(0,t.jsxs)(h(),{component:"form",onSubmit:handleSubmit,sx:{mt:2},children:[(0,t.jsxs)(h(),{sx:{display:"flex",gap:2,mb:2},children:[t.jsx(b(),{fullWidth:!0,label:"First Name",value:c.firstName,onChange:handleInputChange("firstName"),error:!!p.firstName,helperText:p.firstName,required:!0}),t.jsx(b(),{fullWidth:!0,label:"Last Name",value:c.lastName,onChange:handleInputChange("lastName"),error:!!p.lastName,helperText:p.lastName,required:!0})]}),t.jsx(b(),{fullWidth:!0,label:"Email",type:"email",value:c.email,onChange:handleInputChange("email"),error:!!p.email,helperText:p.email,sx:{mb:2},required:!0}),(0,t.jsxs)(y(),{fullWidth:!0,sx:{mb:2},children:[t.jsx(C(),{children:"Role"}),(0,t.jsxs)(_(),{value:c.role,label:"Role",onChange:handleInputChange("role"),children:[t.jsx(A(),{value:"HUB",children:"Hub Owner"}),t.jsx(A(),{value:"PROFESSIONAL",children:"Professional"}),t.jsx(A(),{value:"BRAND",children:"Brand"}),t.jsx(A(),{value:"TRAINER",children:"Trainer"})]})]}),t.jsx(b(),{fullWidth:!0,label:"Password",type:"password",value:c.password,onChange:handleInputChange("password"),error:!!p.password,helperText:p.password,sx:{mb:2},required:!0}),t.jsx(b(),{fullWidth:!0,label:"Confirm Password",type:"password",value:c.confirmPassword,onChange:handleInputChange("confirmPassword"),error:!!p.confirmPassword,helperText:p.confirmPassword,sx:{mb:3},required:!0}),(0,t.jsxs)(h(),{sx:{mb:2},children:[t.jsx(N(),{label:"Test: testuser@dojopool.com",variant:"outlined",color:"info",onClick:()=>{d(e=>({...e,email:"testuser@dojopool.com"}))},sx:{mr:1,mb:1}}),t.jsx(N(),{label:"Password: test123",variant:"outlined",color:"info",onClick:()=>{d(e=>({...e,password:"test123",confirmPassword:"test123"}))}})]}),t.jsx(q(),{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:I||"success"!==f.status,sx:{py:1.5},children:I?(0,t.jsxs)(t.Fragment,{children:[t.jsx(v(),{size:20,sx:{mr:1}}),"Creating Account..."]}):"Create Account"})]}),(0,t.jsxs)(m(),{variant:"body2",align:"center",sx:{mt:3},children:["Already have an account?"," ",t.jsx(q(),{variant:"text",onClick:()=>s.push("/auth/login"),children:"Sign In"})]})]})})}},17708:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>o,__esModule:()=>n,default:()=>l});var t=r(64074);let a=(0,t.createProxy)(String.raw`/home/runner/workspace/snipshift-next/web/app/auth/register/page.tsx`),{__esModule:n,$$typeof:o}=a,i=a.default,l=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[862,225,180,750,622,106],()=>__webpack_exec__(42415));module.exports=r})();